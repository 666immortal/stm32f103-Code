/*********************************************************************************************************
* 模块名称: WWDG.h
* 摘    要: WWDG驱动
* 当前版本: 1.0.0
* 作    者: 
* 完成日期: 2018年03月01日
* 内    容:
* 注    意: none                                                                  
**********************************************************************************************************
* 取代版本: 
* 作    者:
* 完成日期: 
* 修改内容:
* 修改文件: 
*********************************************************************************************************/
#ifndef _WWDG_H_
#define _WWDG_H_

/*********************************************************************************************************
*                                              包含头文件
*********************************************************************************************************/
#include "DataType.h"

/*********************************************************************************************************
*                                              宏定义
*********************************************************************************************************/
//看门狗计数器频率：Fwwdg = PCLK1 / (4096*2^fprer) 
//如果PCLK1=36MHz，fprer=3（即8分频），则Fwwdg = PCLK1 / (4096*2^3) = 36KHz / 32768 = 1098.6KHz(0.91ms)

//中断间隔时间 = Fwwdg * (TR - 0x3F)

//上窗口设置为0x7F
//中断间隔时间 = Fwwdg * (TR - 0x3F) = 0.91ms * (0x7F - 0x3F) = 0.91 * 64 = 58.24ms（Fwwdg=0.91ms，TR = 0x7F） 

//上窗口设置为0x5F            
//中断间隔时间 = Fwwdg * (TR - 0x3F) = 0.91ms * (0x5F - 0x3F) = 0.91 * 32 = 29.12ms（Fwwdg=0.91ms，TR = 0x5F）                                                     

#define USER_DEFINE_WWDG_TR 0x7F    //用户定义WWDG计数器的起始值，最大值为0x7F
#define USER_DEFINE_WWDG_WR 0x5F    //用户定义WWDG的上窗口值，取值范围为：0x3F - 0x7F   
#define USER_DEFINE_WWDG_FPRER   WWDG_Prescaler_8    //用户定义分频数

/*********************************************************************************************************
*                                              枚举结构体定义
*********************************************************************************************************/
 
/*********************************************************************************************************
*                                              API函数声明
*********************************************************************************************************/
void InitWWDG(void);                //初始化窗口看门狗
void SetWWDGCounter(u8 cnt);        //设置WWDG计数器的值

#endif
